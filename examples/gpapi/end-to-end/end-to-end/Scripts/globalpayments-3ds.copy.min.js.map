this.GlobalPayments=this.GlobalPayments||{},this.GlobalPayments.ThreeDSecure=function(e){"use strict";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,u)}s((r=r.apply(e,t||[])).next())})}function r(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function i(u){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(s){u=[6,s],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([i,u])}}}function o(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function e(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(e,null==t?n.path:t)}},n.exports),n.exports}self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise(function(n,r){var o=new XMLHttpRequest,i=[],a=[],u={},s=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase() in u}}}};for(var c in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),u[t]=u[t]?u[t]+","+n:n}),n(s())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(c,t.headers[c]);o.send(t.body||null)})}),Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)});for(var i=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=s.length;c<l;++c)i[c]=s[c],a[s.charCodeAt(c)]=c;function f(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function d(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function h(e,t,n){for(var r,o=[],i=t;i<n;i+=3)o.push(d(r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2])));return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;var $={byteLength:function e(t){var n=f(t),r=n[0],o=n[1];return(r+o)*3/4-o},toByteArray:function e(t){var n,r,o,i,s,c=f(t),l=c[0],d=c[1],h=new u((i=l,s=d,(i+s)*3/4-s)),$=0,p=d>0?l-4:l;for(r=0;r<p;r+=4)n=a[t.charCodeAt(r)]<<18|a[t.charCodeAt(r+1)]<<12|a[t.charCodeAt(r+2)]<<6|a[t.charCodeAt(r+3)],h[$++]=n>>16&255,h[$++]=n>>8&255,h[$++]=255&n;return 2===d&&(n=a[t.charCodeAt(r)]<<2|a[t.charCodeAt(r+1)]>>4,h[$++]=255&n),1===d&&(n=a[t.charCodeAt(r)]<<10|a[t.charCodeAt(r+1)]<<4|a[t.charCodeAt(r+2)]>>2,h[$++]=n>>8&255,h[$++]=255&n),h},fromByteArray:function e(t){for(var n,r=t.length,o=r%3,a=[],u=0,s=r-o;u<s;u+=16383)a.push(h(t,u,u+16383>s?s:u+16383));return 1===o?a.push(i[(n=t[r-1])>>2]+i[n<<4&63]+"=="):2===o&&a.push(i[(n=(t[r-2]<<8)+t[r-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),a.join("")}};o(function(e,t){function n(e){var t,n=e.length,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n);for(t=0;t<n;t++)r[t]=e.charCodeAt(t);return $.fromByteArray(r)}function r(e){var t,n=$.toByteArray(e),r=n.length,o="";for(t=0;t<r;t++)o+=String.fromCharCode(n[t]);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.base64decode=t.base64encode=void 0,t.base64encode=n,t.base64decode=r,window.btoa=window.btoa||n,window.atob=window.atob||r});var p=o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSON=void 0,t.JSON={},function(){function e(e){return e<10?"0"+e:e}if("function"!=typeof Date.prototype.toJSON){Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":""};var n,r,o,i=String.prototype;Number.prototype.JSON=i.JSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof t.JSON.stringify&&(t.JSON.stringify=function(e,t,i){var a;if(n="",r="","number"==typeof i)for(a=0;a<i;a+=1)r+=" ";else"string"==typeof i&&(r=i);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return function e(t,i){var a,u,s,l,f,d=n,h=i[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof o&&(h=o.call(i,t,h)),typeof h){case"string":return c(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(n+=r,f=[],"[object Array]"===Object.prototype.toString.apply(h,[])){for(a=0,l=h.length;a<l;a+=1)f[a]=e(a.toString(),h)||"null";return s=0===f.length?"[]":n?"[\n"+n+f.join(",\n"+n)+"\n"+d+"]":"["+f.join(",")+"]",n=d,s}if(o&&"object"==typeof o)for(a=0,l=o.length;a<l;a+=1)"string"==typeof o[a]&&(s=e(u=o[a],h))&&f.push(c(u)+(n?": ":":")+s);else for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&(s=e(u,h))&&f.push(c(u)+(n?": ":":")+s);return s=0===f.length?"{}":n?"{\n"+n+f.join(",\n"+n)+"\n"+d+"}":"{"+f.join(",")+"}",n=d,s}}("",{"":e})}),"function"!=typeof t.JSON.parse&&(t.JSON.parse=function(e,t){var n;if(e=String(e),a.lastIndex=0,a.test(e)&&(e=e.replace(a,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return n=Function("return ("+e+")")(),"function"==typeof t?function e(n,r){var o,i,a=n[r];if(a&&"object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=e(a,o),a[o]=i);return t.call(n,r,a)}({"":n},""):n;throw SyntaxError("JSON.parse")})}()});o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.JSON=window.JSON||p.JSON}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(y){Object.freeze=(w=Object.freeze,function(e){return"function"==typeof e?e:w(e)})}Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){return void 0!==this[e]}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){var t=[];for(var n in e)void 0!==e.hasOwnProperty&&e.hasOwnProperty(n)&&t.push(n);return t}),function(e){e.forEach(function(e){!e.hasOwnProperty("prepend")&&Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function e(){var t=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();t.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(n,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var g=setTimeout;function A(e){return Boolean(e&&void 0!==e.length)}function I(){}function N(e){if(!(this instanceof N))throw TypeError("Promises must be constructed via new");if("function"!=typeof e)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function M(e,t){for(;3===e._state;)e=e._value;if(0===e._state){e._deferreds.push(t);return}e._handled=!0,N._immediateFn(function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null===r){(1===e._state?m:C)(t.promise,e._value);return}try{n=r(e._value)}catch(o){C(t.promise,o);return}m(t.promise,n)})}function m(e,t){try{if(t===e)throw TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n,r,o=t.then;if(t instanceof N){e._state=3,e._value=t,b(e);return}if("function"==typeof o){v((n=o,r=t,function(){n.apply(r,arguments)}),e);return}}e._state=1,e._value=t,b(e)}catch(i){C(e,i)}}function C(e,t){e._state=2,e._value=t,b(e)}function b(e){2===e._state&&0===e._deferreds.length&&N._immediateFn(function(){e._handled||N._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)M(e,e._deferreds[t]);e._deferreds=null}function T(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1;try{e(function(e){n||(n=!0,m(t,e))},function(e){n||(n=!0,C(t,e))})}catch(r){if(n)return;n=!0,C(t,r)}}N.prototype.catch=function(e){return this.then(null,e)},N.prototype.then=function(e,t){var n=new this.constructor(I);return M(this,new T(e,t,n)),n},N.prototype.finally=function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},N.all=function(e){return new N(function(t,n){if(!A(e))return n(TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u){u.call(a,function(t){i(e,t)},n);return}}r[e]=a,0==--o&&t(r)}catch(s){n(s)}}for(var a=0;a<r.length;a++)i(a,r[a])})},N.allSettled=function e(t){return new this(function(e,n){if(!(t&&void 0!==t.length))return n(TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a){a.call(n,function(e){i(t,e)},function(n){r[t]={status:"rejected",reason:n},0==--o&&e(r)});return}}r[t]={status:"fulfilled",value:n},0==--o&&e(r)}for(var a=0;a<r.length;a++)i(a,r[a])})},N.resolve=function(e){return e&&"object"==typeof e&&e.constructor===N?e:new N(function(t){t(e)})},N.reject=function(e){return new N(function(t,n){n(e)})},N.race=function(e){return new N(function(t,n){if(!A(e))return n(TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)N.resolve(e[r]).then(t,n)})},N._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){g(e,0)},N._unhandledRejectionFn=function e(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var w,E,S,R,D,j,O,_,U,L=function e(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),n}(Object.freeze({__proto__:null,default:N}));function x(e){var t="";switch(e){case 1:return"ONE_BIT";case 2:t+="TWO";break;case 4:t+="FOUR";break;case 8:t+="EIGHT";break;case 15:t+="FIFTEEN";break;case 16:t+="SIXTEEN";break;case 24:case 30:t+="TWENTY_FOUR";break;case 32:t+="THIRTY_TWO";break;case 48:t+="FORTY_EIGHT";break;default:throw Error("Unknown color depth '"+e+"'")}return t+"_BITS"}function P(t){var n=0,r=0;switch(t.size||t.windowSize){case e.ChallengeWindowSize.Windowed250x400:n=250,r=400;break;case e.ChallengeWindowSize.Windowed390x400:n=390,r=400;break;case e.ChallengeWindowSize.Windowed500x600:n=500,r=600;break;case e.ChallengeWindowSize.Windowed600x400:n=600,r=400}return{height:n,width:r}}function G(t){switch(t){case e.AuthenticationRequestType.AddCard:case e.AuthenticationRequestType.CardholderVerification:case e.AuthenticationRequestType.MaintainCard:return e.MessageCategory.NonPayment;case e.AuthenticationRequestType.InstalmentTransaction:case e.AuthenticationRequestType.PaymentTransaction:case e.AuthenticationRequestType.RecurringTransaction:default:return e.MessageCategory.Payment}}o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.Promise=window.Promise||L.default||L}),String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",n=0;n<e;n++)t+=this;return t}),o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}),(E=e.AuthenticationSource||(e.AuthenticationSource={})).Browser="BROWSER",E.MobileSDK="MOBILE_SDK",E.StoredRecurring="STORED_RECURRING",(S=e.AuthenticationRequestType||(e.AuthenticationRequestType={})).AddCard="ADD_CARD",S.CardholderVerification="CARDHOLDER_VERIFICATION",S.InstalmentTransaction="INSTALMENT_TRANSACTION",S.MaintainCard="MAINTAIN_CARD",S.PaymentTransaction="PAYMENT_TRANSACTION",S.RecurringTransaction="RECURRING_TRANSACTION",(R=e.ChallengeRequestIndicator||(e.ChallengeRequestIndicator={})).ChallengeMandated="CHALLENGE_MANDATED",R.ChallengePreferred="CHALLENGE_PREFERRED",R.NoChallengeRequested="NO_CHALLENGE_REQUESTED",R.NoPreference="NO_PREFERENCE",(D=e.ChallengeWindowSize||(e.ChallengeWindowSize={})).FullScreen="FULL_SCREEN",D.Windowed250x400="WINDOWED_250X400",D.Windowed390x400="WINDOWED_390X400",D.Windowed500x600="WINDOWED_500X600",D.Windowed600x400="WINDOWED_600X400",(j=e.MessageCategory||(e.MessageCategory={})).NonPayment="NON_PAYMENT_AUTHENTICATION",j.Payment="PAYMENT_AUTHENTICATION",(O=e.MethodUrlCompletion||(e.MethodUrlCompletion={})).Unavailable="UNAVAILABLE",O.No="NO",O.Yes="YES",(_=e.TransactionStatus||(e.TransactionStatus={})).AuthenticationAttemptedButNotSuccessful="AUTHENTICATION_ATTEMPTED_BUT_NOT_SUCCESSFUL",_.AuthenticationCouldNotBePerformed="AUTHENTICATION_COULD_NOT_BE_PERFORMED",_.AuthenticationFailed="AUTHENTICATION_FAILED",_.AuthenticationIssuerRejected="AUTHENTICATION_ISSUER_REJECTED",_.AuthenticationSuccessful="AUTHENTICATION_SUCCESSFUL",_.ChallengeRequired="CHALLENGE_REQUIRED",(U=e.TransactionStatusReason||(e.TransactionStatusReason={})).CardAuthenticationFailed="CARD_AUTHENTICATION_FAILED",U.UnknownDevice="UNKNOWN_DEVICE",U.UnsupportedDevice="UNSUPPORTED_DEVICE",U.ExceedsAuthenticationFrequencyLimit="EXCEEDS_AUTHENTICATION_FREQUENCY_LIMIT",U.ExpiredCard="EXPIRED_CARD",U.InvalidCardNumber="INVALID_CARD_NUMBER",U.InvalidTransaction="INVALID_TRANSACTION",U.NoCardRecord="NO_CARD_RECORD",U.SecurityFailure="SECURITY_FAILURE",U.StolenCard="STOLEN_CARD",U.SuspectedFraud="SUSPECTED_FRAUD",U.TransactionNotPermittedToCardholder="TRANSACTION_NOT_PERMITTED_TO_CARDHOLDER",U.CardholderNotEnrolledInService="CARDHOLDER_NOT_ENROLLED_IN_SERVICE",U.TransactionTimedOutAtTheAcs="TRANSACTION_TIMED_OUT_AT_THE_ACS",U.LowConfidence="LOW_CONFIDENCE",U.MediumConfidence="MEDIUM_CONFIDENCE",U.HighConfidence="HIGH_CONFIDENCE",U.VeryHighConfidence="VERY_HIGH_CONFIDENCE",U.ExceedsAcsMaximumChallenges="EXCEEDS_ACS_MAXIMUM_CHALLENGES",U.NonPaymentTransactionNotSupported="NON_PAYMENT_TRANSACTION_NOT_SUPPORTED",U.ThreeriTransactionNotSupported="THREERI_TRANSACTION_NOT_SUPPORTED";var F=function(e){function n(t,n){var r=e.call(this,n||"Error: see `reasons` property")||this;return r.error=!0,r.reasons=t,r}return function e(n,r){function o(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}(n,e),n}(Error);function z(e,t,n){window.parent!==window&&window.parent.postMessage({data:t,event:e},n||window.location.origin)}function Z(e,t){return n(this,void 0,void 0,function(){var n,o,i,a,u,s;return r(this,function(r){switch(r.label){case 0:n={"Content-Type":"application/json"},r.label=1;case 1:return r.trys.push([1,6,,7]),[4,fetch(e,{body:JSON.stringify(t),credentials:"omit",headers:"undefined"!=typeof Headers?new Headers(n):n,method:"POST"})];case 2:if((o=r.sent()).ok)return[3,4];return i=F.bind,s={code:o.status.toString()},[4,o.text()];case 3:throw new(i.apply(F,[void 0,[(s.message=r.sent(),s)],o.statusText]));case 4:return[4,o.json()];case 5:return[2,r.sent()];case 6:throw u=[{code:(a=r.sent()).name,message:a.message}],a.reasons&&(u=u.concat(a.reasons)),new F(u);case 7:return[2]}})})}var Y=/Windows Phone|IEMobile/.test(navigator.userAgent),W=/Android|iPad|iPhone|iPod/.test(navigator.userAgent),H=(window.innerWidth>0?window.innerWidth:screen.width)<=360||(window.innerHeight>0?window.innerHeight:screen.height)<=360,k=Y||!Y&&(W||H),J=Math.random().toString(16).substr(2,8);function B(t,n,r){return new Promise(function(o,i){r.timeout&&(s=setTimeout(function(){V(s),i(Error("timeout reached"))},r.timeout));var a,u,s,c=document.createElement("iframe");c.id=c.name="GlobalPayments-3DSecure-"+J,c.style.display=r.hide?"none":"inherit";var l=function e(t,n,r){var o=document.createElement("form");o.setAttribute("method","POST"),o.setAttribute("action",t),o.setAttribute("target",n);for(var i=0,a=r;i<a.length;i++){var u=a[i],s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",u.name),s.setAttribute("value",u.value),o.appendChild(s)}return o}(t,c.id,n);switch(r.displayMode){case"redirect":V(s),i(Error("Not implemented"));return;case"lightbox":!function t(n,r){var o,i,a,u,s,c,l=(s=document.createElement("div"),s.setAttribute("id","GlobalPayments-overlay-"+J),s.style.position="fixed",s.style.width="100%",s.style.height="100%",s.style.top="0",s.style.left="0",s.style.transition="all 0.3s ease-in-out",s.style.zIndex="100",k&&(s.style.position="absolute !important",s.style.WebkitOverflowScrolling="touch",s.style.overflowX="hidden",s.style.overflowY="scroll"),document.body.appendChild(s),setTimeout(function(){s.style.background="rgba(0, 0, 0, 0.7)"},1),s),f=(c=document.createElement("img"),c.setAttribute("src","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iIzAwNzBiYSIgZmlsbC1vcGFjaXR5PSIxIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTM1IDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA2NCA2NCkiLz48cGF0aCBkPSJNMzguNTIgMzMuMzdMMjEuMzYgMTYuMkE2My42IDYzLjYgMCAwIDEgNTkuNS4xNnYyNC4zYTM5LjUgMzkuNSAwIDAgMC0yMC45OCA4LjkyeiIgZmlsbD0iI2MwZGNlZSIgZmlsbC1vcGFjaXR5PSIwLjI1IiB0cmFuc2Zvcm09InJvdGF0ZSgyMjUgNjQgNjQpIi8+PHBhdGggZD0iTTM4LjUyIDMzLjM3TDIxLjM2IDE2LjJBNjMuNiA2My42IDAgMCAxIDU5LjUuMTZ2MjQuM2EzOS41IDM5LjUgMCAwIDAtMjAuOTggOC45MnoiIGZpbGw9IiNjMGRjZWUiIGZpbGwtb3BhY2l0eT0iMC4yNSIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxwYXRoIGQ9Ik0zOC41MiAzMy4zN0wyMS4zNiAxNi4yQTYzLjYgNjMuNiAwIDAgMSA1OS41LjE2djI0LjNhMzkuNSAzOS41IDAgMCAwLTIwLjk4IDguOTJ6IiBmaWxsPSIjYzBkY2VlIiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0icm90YXRlKDMxNSA2NCA2NCkiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgdmFsdWVzPSIwIDY0IDY0OzQ1IDY0IDY0OzkwIDY0IDY0OzEzNSA2NCA2NDsxODAgNjQgNjQ7MjI1IDY0IDY0OzI3MCA2NCA2NDszMTUgNjQgNjQiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSIxMjgwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg=="),c.setAttribute("id","GlobalPayments-loader-"+J),c.style.left="50%",c.style.position="fixed",c.style.background="#FFFFFF",c.style.borderRadius="50%",c.style.width="30px",c.style.zIndex="200",c.style.marginLeft="-15px",c.style.top="120px",c);document.body.appendChild(f);var d=P(r),h=d.height,$=d.width;if(h&&n.setAttribute("height",h+"px"),n.setAttribute("frameBorder","0"),$&&n.setAttribute("width",$+"px"),n.setAttribute("seamless","seamless"),n.style.zIndex="10001",n.style.position="absolute",n.style.transition="transform 0.5s ease-in-out",n.style.transform="scale(0.7)",n.style.opacity="0",l.appendChild(n),k||r.windowSize===e.ChallengeWindowSize.FullScreen){n.style.top="0px",n.style.bottom="0px",n.style.left="0px",n.style.marginLeft="0px;",n.style.width="100%",n.style.height="100%",n.style.minHeight="100%",n.style.WebkitTransform="translate3d(0,0,0)",n.style.transform="translate3d(0, 0, 0)";var p=document.createElement("meta");p.name="viewport",p.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(p)}else n.style.top="40px",n.style.left="50%",n.style.marginLeft="-"+$/2+"px";n.onload=(o=n,i=f,a=l,u=r,function(){var t;o.style.opacity="1",o.style.transform="scale(1)",o.style.backgroundColor="#ffffff",i.parentNode&&i.parentNode.removeChild(i),(t=function t(n){if(null===document.getElementById("GlobalPayments-frame-close-"+J)){var r=document.createElement("img");r.id="GlobalPayments-frame-close-"+J,r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJFRjU1MEIzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUJFRjU1MEMzMUQ3MTFFNThGQjNERjg2NEZCRjFDOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkVGNTUwOTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkVGNTUwQTMxRDcxMUU1OEZCM0RGODY0RkJGMUM5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlHco5QAAAHpSURBVHjafFRdTsJAEF42JaTKn4glGIg++qgX4AAchHAJkiZcwnAQD8AF4NFHCaC2VgWkIQQsfl/jNJUik8Duzs/XmW9mN7Xb7VRc5vP5zWKxaK5Wq8Zmu72FqobfJG0YQ9M0+/l8/qFQKDzGY1JxENd1288vLy1s786KRZXJZCLber1Wn7MZt4PLarVnWdZ9AmQ8Hncc17UvymVdBMB/MgPQm+cFFcuy6/V6lzqDf57ntWGwYdBIVx0TfkBD6I9M35iRJgfIoAVjBLDZbA4CiJ5+9AdQi/EahibqDTkQx6fRSIHcPwA8Uy9A9Gcc47Xv+w2wzhRDYzqdVihLIbsIiCvP1NNOoX/29FQx3vgOgtt4FyRdCgPRarX4+goB9vkyAMh443cOEsIAAcjncuoI4TXWMAmCIGFhCQLAdZ8jym/cRJ+Y5nC5XCYAhINKpZLgSISZgoqh5iiLQrojAFICVwGS7tCfe5DbZzkP56XS4NVxwvTI/vXVVYIDnqmnnX70ZxzjNS8THHooK5hMpxHQIREA+tEfA9djfHR3MHkdx3Hspe9r3B+VzWaj2RESyR2mlCUE4MoGQDdxiwHURq2t94+PO9bMIYyTyDNLwMoM7g8+BfKeYGniyw2MdfSehF3Qmk1IvCc/AgwAaS86Etp38bUAAAAASUVORK5CYII=",r.style.transition="all 0.5s ease-in-out",r.style.opacity="0",r.style.float="left",r.style.position="absolute",r.style.left="50%",r.style.zIndex="99999999",r.style.top="30px";var o=P(n).width;return o&&(r.style.marginLeft=o/2-8+"px"),setTimeout(function(){r.style.opacity="1"},500),(k||n.windowSize===e.ChallengeWindowSize.FullScreen)&&(r.style.float="right",r.style.top="20px",r.style.left="initial",r.style.marginLeft="0px",r.style.right="20px"),r}}(u))&&(a.appendChild(t),t.addEventListener("click",function(){t&&Array.prototype.slice.call(document.querySelectorAll('[target$="-'+J+'"],[id$="-'+J+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},!0))})}(c,r);break;default:if(!function e(t,n,r){if(!(o=r.hide?document.body:"string"==typeof r.target?document.querySelector(r.target):r.target))return V(n.timeout||0),t(Error("Embed target not found")),!1;var o,i=P(r),a=i.height,u=i.width;return n.iframe&&(n.iframe.setAttribute("height",a?a+"px":"100%"),n.iframe.setAttribute("width",u?u+"px":"100%"),o.appendChild(n.iframe)),!0}(i,{iframe:c,timeout:s},r))return}window.addEventListener("message",(a=o,u={origin:r.origin,timeout:s},function(e){(u.origin||window.location.origin)===e.origin&&(V(u.timeout||0),a(e.data))})),document.body.appendChild(l),l.submit()})}function V(e){e&&clearTimeout(e);try{Array.prototype.slice.call(document.querySelectorAll('[target$="-'+J+'"],[id$="-'+J+'"]')).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}catch(t){}}function Q(){var e=new Date;return{colorDepth:screen&&x(screen.colorDepth),javaEnabled:navigator&&navigator.javaEnabled(),javascriptEnabled:!0,language:navigator&&navigator.language,screenHeight:screen&&screen.height,screenWidth:screen&&screen.width,time:e,timezoneOffset:e.getTimezoneOffset()/60,userAgent:navigator&&navigator.userAgent}}function X(e,t){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:if(!e.enrolled)throw Error("Card not enrolled");if((t=t||{}).hide=void 0===t.hide||t.hide,t.timeout=void 0===t.timeout?3e4:t.timeout,!e.methodUrl)return[3,2];return[4,B(e.methodUrl,[{name:"threeDSMethodData",value:e.methodData}],t)];case 1:n.sent(),n.label=2;case 2:return[2,e]}})})}function q(t,o){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:if(!(t.challengeMandated||t.status===e.TransactionStatus.ChallengeRequired))return[3,2];if(t.challenge=t.challenge||{},console.log("request: ",t.challenge.requestUrl),!t.challenge.requestUrl)throw Error("Invalid challenge state. Missing challenge URL");return[4,B(t.challenge.requestUrl,[{name:"creq",value:t.challenge.encodedChallengeRequest},],o)];case 1:n=r.sent(),t.challenge.response=n,r.label=2;case 2:return[2,t]}})})}return e.checkVersion=function e(t,o){return n(this,void 0,void 0,function(){var e,n,i;return r(this,function(r){switch(r.label){case 0:o=o||{},r.label=1;case 1:return r.trys.push([1,4,,5]),[4,Z(t,o)];case 2:return[4,X(e=r.sent(),o.methodWindow)];case 3:return[2,r.sent()];case 4:throw i=[{code:(n=r.sent()).name,message:n.message}],n.reasons&&(i=i.concat(n.reasons)),new F(i);case 5:return[2]}})})},e.colorDepth=x,e.dimensionsFromChallengeWindowSize=P,e.getBrowserData=Q,e.handle3dsVersionCheck=X,e.handleChallengeNotification=function e(t,n){z("challengeNotification",t,n)},e.handleInitiateAuthentication=q,e.handleMethodNotification=function e(t,n){z("methodNotification",t,n)},e.initiateAuthentication=function t(o,i){return n(this,void 0,void 0,function(){var t,n,a;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),i.authenticationSource=i.authenticationSource||e.AuthenticationSource.Browser,i.authenticationRequestType=i.authenticationRequestType||e.AuthenticationRequestType.PaymentTransaction,i.messageCategory=i.messageCategory||G(i.authenticationRequestType),i.challengeRequestIndicator=i.challengeRequestIndicator||e.ChallengeRequestIndicator.NoPreference,i.browserData=i.browserData||Q(),[4,Z(o,i)];case 1:return[4,q(t=r.sent(),i.challengeWindow)];case 2:return[2,r.sent()];case 3:throw a=[{code:(n=r.sent()).name,message:n.message}],n.reasons&&(a=a.concat(n.reasons)),new F(a);case 4:return[2]}})})},e.messageCategoryFromAuthenticationRequestType=G,Object.defineProperty(e,"__esModule",{value:!0}),e}({});